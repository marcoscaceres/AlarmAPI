<html>
<head>
<meta charset=utf-8>
<title>Alarm API</title>
<script data-main="/lib/main.js" src="/deps/require.js"></script>

<!-- Below attached js file contains functions to add task -->
<script type="text/javascript" src="task.js"></script> <!--Order is important - first task.js needs to be loeaded --> 

<!-- Below attached js file contains functions to create time and calendar pickers -->
<link rel="stylesheet" media="screen, print, handheld" type="text/css" href="calendar.css" />
<script type="text/javascript" src="calendar.js"></script>
<script type="text/javascript" src="clock.js"></script>


<!-- Below attached js file contains all required functions for proper TaskScheduler prototype behaviour -->
<script type="text/javascript" src="../lib/interfaces/LoadTasks.js"></script>


</head>
<body>

<script  type="text/javascript">

  /*
  * 
  * Adding event listener for "task" event generated by TaskScheduler using setTimeout
  *   	Event contains extra fields:
  *		data - this is stored task data
  *		date - this is exact date when task should be raised
  *
  */
  document.addEventListener('task', function (e) {
				    // e.target matches target from above
				    console.log("event listener got task with data: "+ e.detail.data+" raised for date:"+e.detail.date);
				    }, false);
		
  /* 
  * Adding created dynamically calendar picker with default day set to now()
  */		
  calendar(new Date());
  //calendar(new Date('Thu Oct 12 2013 14:24:35 GMT+0200 (CEST)'));

  add_task_details_field();
  /* 
  * Adding created dynamically time picker with default time set to 12:00
  *	!there is NO possibility to add seconds under Chromium (they have special HTML5 imput form for that)
  */		
  add_clock();
  /* 
  * Adding data field for user to input description of the task
  */ 
  add_data_field( );
  
  /* 
  * Adding task button
  */ 
  add_task_button( );
  
  /*
  * Get all pending tasks
  */
  
  add_pendingTasks_button( );
  
  
  /******************************************************************
  *
  * Function that will close all tasks before reloading/closing page
  *
  *******************************************************************/		
  window.onbeforeunload = function(e) {
	close_all_tasks (new Date());
	return 'All pending tasks has been closed.';
  };
</script>

</body>
</html>

